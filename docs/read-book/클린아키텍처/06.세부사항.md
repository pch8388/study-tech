# 데이터베이스는 세부사항이다
- 데이터베이스는 모델이 아닌 일개 소프트웨어일 뿐이다
- 데이터베이스는 데이터에 접근할 방법을 제공하는 유틸리티
  - 저수준의 메커니즘이므로 아키텍처를 오염시켜선 안됨
- 많은 데이터 접근 프레임워크가 테이블과 행이 객체 형태로 시스템을 돌아다니게 하는데, 아키텍처적으로 잘못된 설계이다
  - 데이터베이스 구조에 결합되어 버림
- 데이터는 중요하다. 데이터베이스는 세부사항이다.

# 웹은 세부사항이다
- 웹은 GUI 이고, GUI 는 세부사항이다
- 웹을 입출력 장치로 생각하자

# 프레임워크는 세부사항이다
- 프레임워크는 제네릭하게 만들어져 있고, 아키텍처를 제네릭하게 가져가는 것은 잘못되었을 가능성이 크다.
  - 프레임워크는 일반적으로 만들기 때문에 우리의 상황까지 모두 고려하여 만들어지지 않는다. 프레임워크에 아키텍처를 끼워맞추다보면 의도와는 다른 프로그램이 만들어 질 수 있다
- 프레임워크와는 적당한 거리를 두어 결합도를 낮춰야 한다

# 사례 연구 : 비디오 판매
- 시스템의 초기 아키텍처를 결정하는 첫 단계는 액터와 유스케이스 식별
- 사용관계는 제어흐름과 같은 방향, 상속관계는 제어흐름과 반대 방향을 가리켜야 한다
- 단일 책임 원칙에 기반해 액터를 분리하고, 의존성 규칙에 따라 정책수준을 분리한다
  - 이 두차원은 서로 다른 이유로 서로 다른 속도로 변경되는 컴포넌트를 분리하는 데 목적이 있다
    - 액터 : 서로 다른 이유
    - 정책 수준 : 서로 다른 속도

# 빠져 있는 장
## 계층 기반 패키지
- 전통적인 수평 계층형 아키텍처
- 해당 코드가 하는 일에 기반해 그 코드를 분할
- 웹 / 업무 규칙 / 영속성 코드를 위한 계층이 존재
- 빠르게 구현이 가능하지만, 소프트웨어가 커지기 시작하면 또다른 모듈화를 고민해야 함
- 아키텍처만으로는 업무 도메인에 대해 이해할 수 없음

## 기능 기반 패키지
- 서로 연관된 기능, 도메인 개념, Aggregate Root 에 기반하여 수직의 얇은 조각으로 코드를 나눔

## 포트와 어댑터
- 업무/도메인에 초점을 둔 코드가 프레임워크나 데이터베이스 같은 기술적인 세부 구현과 독립적이고 분리된 아키텍처
- 내부와 외부를 업무규칙과 세부사항으로 나누고, 의존성이 항상 외부에서 내부로만 흐르도록 한다
  - 내부에 존재하는 모든 것은 유비쿼터스 도메인 언어 관점에서 기술해야 함

## 컴포넌트 기반 패키지
- 컴포넌트는 배포 단위
- 컴포넌트 기반으로 패키지를 분리하며, 컴포넌트에 접근할 때는 하나의 입구(클래스)를 통해서만 가능하다
  - 단일 컴포넌트를 하나의 책임을 가진 객체와 같이 묶고, 컴파일 시점에 하나의 입구만 사용하도록 강제한다 => public 한 클래스를 하나만 사용

### public 접근 지시자
- public 과 같은 접근 지시자를 아무 생각없이 사용하는 경우가 너무나 많지만, 이는 언어에서 제공하는 캡슐화의 이점을 포기하는 것이다
- package-private 과 같은 것들을 활용하여 패키지 레벨의 캡슐화를 생각해봐야한다
- [만들면서 배우는 클린 아키텍처](http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&ejkGb=KOR&barcode=9791158392758) 에서 예제를 들어 잘 설명한다
- 이 책에서 가장 중요하다고 생각되는 그림이 330P 의 34.8 이다. 필요하다면 자주 참고하자.